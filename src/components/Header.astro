---
import HamburgerMenu from './HamburgerMenu.astro';
import Logo from '../assets/mexi-chili.svg';
import { SkewButton } from './ui';

const navLinks = [
	{ href: '/booking', label: 'Booking' },
	{ href: '/concerts', label: 'Konserter' },
	{ href: '/about', label: 'Om oss' }
];

// Get current path for active state
const currentPath = Astro.url.pathname;
const isActive = (href: string) => {
	if (href === '/') return currentPath === '/';
	return currentPath.startsWith(href);
};
---

<header
	class="bg-mexi-black text-mexi-white border-mexi-red fixed top-0 right-0 left-0 z-10 border-t-4 shadow-lg"
>
	<nav
		class="mx-auto flex max-w-7xl items-center justify-between px-4 py-3 md:justify-start md:gap-8"
	>
		<a href="/" class="group flex items-center gap-2 px-2" aria-label="Los Mexicanacas - Hjem">
			<Logo class="h-12 w-auto transition-transform group-hover:scale-105" aria-hidden="true" />
			<span
				class="font-display text-mexi-white group-hover:text-mexi-green hidden text-xl tracking-wide uppercase transition-colors md:block"
			>
				Los Mexicanacas
			</span>
		</a>

		<ul class="hidden gap-6 text-lg font-semibold tracking-wide md:flex md:gap-8 md:text-xl">
			{
				navLinks.map((link) => (
					<li>
						<a
							href={link.href}
							class:list={[
								'relative py-2 transition-colors duration-200 after:absolute after:bottom-0 after:left-0 after:h-0.5 after:transition-all after:duration-200',
								isActive(link.href)
									? 'text-mexi-green after:bg-mexi-green after:w-full'
									: 'hover:text-mexi-green after:bg-mexi-green after:w-0 hover:after:w-full'
							]}
							aria-current={isActive(link.href) ? 'page' : undefined}
						>
							{link.label}
						</a>
					</li>
				))
			}
		</ul>

		<!-- Book Now CTA - Desktop only -->
		<div class="mr-4 ml-auto hidden md:block">
			<SkewButton href="/booking" size="sm" confetti> Book oss! </SkewButton>
		</div>

		<HamburgerMenu links={navLinks} currentPath={currentPath} />
	</nav>
</header>
